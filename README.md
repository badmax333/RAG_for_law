# RAG-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ **Retrieval-Augmented Generation (RAG)**. –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ü—Ä–∞–≤–∏–ª–∞ –î–æ—Ä–æ–∂–Ω–æ–≥–æ –î–≤–∏–∂–µ–Ω–∏—è (–ü–î–î) –†–§ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏–∑ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤—ã–π —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫**: –†–∞–∑–¥–µ–ª—ã ‚Üí –ü—É–Ω–∫—Ç—ã ‚Üí –ü–æ–¥–ø—É–Ω–∫—Ç—ã
- **–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ FAISS** –¥–ª—è –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** —Å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π
- **–°—Å—ã–ª–∫–∏ –Ω–∞ –ø–µ—Ä–≤–æ–∏—Å—Ç–æ—á–Ω–∏–∫–∏** –≤ –∫–∞–∂–¥–æ–º –æ—Ç–≤–µ—Ç–µ
- **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** —Å –ø—Ä–æ—Å—Ç—ã–º frontend/Telegram –±–æ—Ç–æ–º

---

## üìä –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### 1. –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

**–ò—Å—Ö–æ–¥–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç**: [–ü—Ä–∞–≤–∏–ª–∞ –î–æ—Ä–æ–∂–Ω–æ–≥–æ –î–≤–∏–∂–µ–Ω–∏—è –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏](https://ru.wikisource.org/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D0%B0_%D0%B4%D0%BE%D1%80%D0%BE%D0%B6%D0%BD%D0%BE%D0%B3%D0%BE_%D0%B4%D0%B2%D0%B8%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F_%D0%A0%D0%BE%D1%81%D1%81%D0%B8%D0%B9%D1%81%D0%BA%D0%BE%D0%B9_%D0%A4%D0%B5%D0%B4%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8)
**–§–æ—Ä–º–∞—Ç**: `.docx` (pdd_text.docx)
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞**:
- 30 —Ä–∞–∑–¥–µ–ª–æ–≤ (—Å–µ–∫—Ü–∏–π)
- 208 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤
- 6 –ø–æ–¥–ø—É–Ω–∫—Ç–æ–≤
- –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –Ω—É–º–µ—Ä–∞—Ü–∏—è: `–†–∞–∑–¥–µ–ª.–ü—É–Ω–∫—Ç.–ü–æ–¥–ø—É–Ω–∫—Ç`

### 2. –≠—Ç–∞–ø –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

#### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **python-docx** ‚Äî —á—Ç–µ–Ω–∏–µ .docx —Ñ–∞–π–ª–æ–≤
- **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è** ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

#### –ü—Ä–æ—Ü–µ—Å—Å –ø–∞—Ä—Å–∏–Ω–≥–∞

```python
# –û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã –ø–∞—Ä—Å–∏–Ω–≥–∞:
1. –ß—Ç–µ–Ω–∏–µ .docx —Ñ–∞–π–ª–∞ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
2. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É: "–†–∞–∑–¥–µ–ª N. –ù–∞–∑–≤–∞–Ω–∏–µ"
3. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—É–Ω–∫—Ç–æ–≤ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É: "N.M. –¢–µ–∫—Å—Ç"
4. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–¥–ø—É–Ω–∫—Ç–æ–≤ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É: "N.M.K. –¢–µ–∫—Å—Ç"
5. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
```

#### –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –ø–∞—Ä—Å–µ—Ä–∞

```python
def parse_pdd_to_json(text):
    """
    –ü–∞—Ä—Å–∏–Ω–≥ –ü–î–î –∏–∑ —Ç–µ–∫—Å—Ç–∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON
    - –†–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Ä–∞–∑–¥–µ–ª—ã, –ø—É–Ω–∫—Ç—ã –∏ –ø–æ–¥–ø—É–Ω–∫—Ç—ã
    - –§–æ—Ä–º–∏—Ä—É–µ—Ç –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
    - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ –ø—É–Ω–∫—Ç—ã
    """
    # –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    section_match = re.match(r'^(\d+)\.\s+(.+)$', line)
    main_p_match = re.match(r'^(\d+\.\d+)\.\s+(.+)$', line)
    sub_p_match = re.match(r'^(\d+\.\d+\.\d+)\.\s+(.+)$', line)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: `pdd_structured.json` ‚Äî –ø–µ—Ä–≤–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### 3. –û–±–æ–≥–∞—â–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é LLM

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ –æ–±–æ–≥–∞—â–µ–Ω—ã –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ —Ä–∞–∑–¥–µ–ª–æ–≤ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞.

#### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è
- **LLM –º–æ–¥–µ–ª—å**: DeepSeek v3.2
- **–ó–∞–¥–∞—á–∞**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–∞—Ç–∫–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞

#### –ü—Ä–æ—Ü–µ—Å—Å –æ–±–æ–≥–∞—â–µ–Ω–∏—è

```
–í—Ö–æ–¥: –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ + –°–ø–∏—Å–æ–∫ –ø—É–Ω–∫—Ç–æ–≤
       ‚Üì
   DeepSeek v3.2
       ‚Üì
–í—ã—Ö–æ–¥: –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (description) —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∞
```

#### –ü—Ä–∏–º–µ—Ä –æ–±–æ–≥–∞—â–µ–Ω–∏—è

**–î–æ –æ–±–æ–≥–∞—â–µ–Ω–∏—è**:
```json
{
  "sec_num": "10",
  "name": "–û–±–≥–æ–Ω, –æ–ø–µ—Ä–µ–∂–µ–Ω–∏–µ, –≤—Å—Ç—Ä–µ—á–Ω—ã–π —Ä–∞–∑—ä–µ–∑–¥",
  "content": [...]
}
```

**–ü–æ—Å–ª–µ –æ–±–æ–≥–∞—â–µ–Ω–∏—è**:
```json
{
  "sec_num": "10",
  "name": "–û–±–≥–æ–Ω, –æ–ø–µ—Ä–µ–∂–µ–Ω–∏–µ, –≤—Å—Ç—Ä–µ—á–Ω—ã–π —Ä–∞–∑—ä–µ–∑–¥",
  "description": "–†–∞–∑–¥–µ–ª —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±–≥–æ–Ω–∞ –∏ –æ–ø–µ—Ä–µ–∂–µ–Ω–∏—è: —É—Å–ª–æ–≤–∏—è, –∫–æ–≥–¥–∞ –æ–±–≥–æ–Ω —Ä–∞–∑—Ä–µ—à–µ–Ω –∏ –∑–∞–ø—Ä–µ—â–µ–Ω, –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π –ø—Ä–∏ –æ–±–≥–æ–Ω–µ, –ø—Ä–∞–≤–∏–ª–∞ –≤—Å—Ç—Ä–µ—á–Ω–æ–≥–æ —Ä–∞–∑—ä–µ–∑–¥–∞.",
  "content": [...]
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: `pdd.json` ‚Äî –∏—Ç–æ–≥–æ–≤–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö: JSON

–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `pdd.json` –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞ —Ä–∞–∑–¥–µ–ª–æ–≤ —Å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.

### –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

```
–î–æ–∫—É–º–µ–Ω—Ç (pdd.json)
‚îÇ
‚îî‚îÄ‚îÄ [ –†–∞–∑–¥–µ–ª 1, –†–∞–∑–¥–µ–ª 2, ..., –†–∞–∑–¥–µ–ª N ]
    ‚îÇ
    ‚îî‚îÄ‚îÄ –†–∞–∑–¥–µ–ª (section)
        ‚îú‚îÄ‚îÄ sec_num: string           # –ù–æ–º–µ—Ä —Ä–∞–∑–¥–µ–ª–∞
        ‚îú‚îÄ‚îÄ name: string              # –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞
        ‚îú‚îÄ‚îÄ description: string       # –û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è (—Å–æ–∑–¥–∞–Ω–æ LLM)
        ‚îî‚îÄ‚îÄ content: [ –ü—É–Ω–∫—Ç 1, –ü—É–Ω–∫—Ç 2, ... ]
            ‚îÇ
            ‚îî‚îÄ‚îÄ –ü—É–Ω–∫—Ç
                ‚îú‚îÄ‚îÄ p_num: string           # –ù–æ–º–µ—Ä –ø—É–Ω–∫—Ç–∞ (N.M)
                ‚îú‚îÄ‚îÄ full_text: string       # –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –ø—É–Ω–∫—Ç–∞
                ‚îî‚îÄ‚îÄ p_sup: [ –ü–æ–¥–ø—É–Ω–∫—Ç 1, –ü–æ–¥–ø—É–Ω–∫—Ç 2, ... ] (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                    ‚îÇ
                    ‚îî‚îÄ‚îÄ –ü–æ–¥–ø—É–Ω–∫—Ç
                        ‚îú‚îÄ‚îÄ p_num: string      # –ù–æ–º–µ—Ä –ø–æ–¥–ø—É–Ω–∫—Ç–∞ (N.M.K)
                        ‚îî‚îÄ‚îÄ full_text: string  # –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –ø–æ–¥–ø—É–Ω–∫—Ç–∞
```

### –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```json
[
  {
    "section": {
      "sec_num": "1",
      "name": "–û–±—â–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π",
      "description": "–†–∞–∑–¥–µ–ª –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –≤–æ–¥–∏—Ç–µ–ª–µ–π: –Ω–∞–ª–∏—á–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–º–Ω–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¢–°, –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –î–¢–ü, –∑–∞–ø—Ä–µ—Ç—ã –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ–ø—å—è–Ω–µ–Ω–∏—è –∏ –¥—Ä—É–≥–∏–µ –≤–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞.",
      "content": [
        {
          "p_num": "1.1",
          "full_text": "–í–æ–¥–∏—Ç–µ–ª—å –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞ –æ–±—è–∑–∞–Ω:",
          "p_sup": [
            {
              "p_num": "1.1.1",
              "full_text": "–ò–º–µ—Ç—å –ø—Ä–∏ —Å–µ–±–µ –∏ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –º–∏–ª–∏—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏–º, –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏: –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ..."
            },
            {
              "p_num": "1.1.2",
              "full_text": "–ü—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–º —Å—Ä–µ–¥—Å—Ç–≤–µ, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–Ω–æ–º —Ä–µ–º–Ω—è–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –±—ã—Ç—å –ø—Ä–∏—Å—Ç–µ–≥–Ω—É—Ç—ã–º..."
            }
          ]
        },
        {
          "p_num": "1.2",
          "full_text": "–í–æ–¥–∏—Ç–µ–ª—å –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞, —É—á–∞—Å—Ç–≤—É—é—â–∏–π –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º –¥–æ—Ä–æ–∂–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏..."
        }
      ]
    }
  }
]
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–∞–Ω–Ω—ã–º

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–†–∞–∑–¥–µ–ª–æ–≤** | 30 |
| **–û—Å–Ω–æ–≤–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤** | 208 |
| **–ü–æ–¥–ø—É–Ω–∫—Ç–æ–≤** | 6 |
| **–†–∞–∑–¥–µ–ª–æ–≤ —Å –ø–æ–¥–ø—É–Ω–∫—Ç–∞–º–∏** | 1 |
| **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞** | ~180 KB |

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

1. **–ò–µ—Ä–∞—Ä—Ö–∏—á–Ω–æ—Å—Ç—å**: –¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å (—Ä–∞–∑–¥–µ–ª ‚Üí –ø—É–Ω–∫—Ç ‚Üí –ø–æ–¥–ø—É–Ω–∫—Ç)
2. **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ**: –ö–∞–∂–¥—ã–π —Ä–∞–∑–¥–µ–ª –∏–º–µ–µ—Ç `description` –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω—É–º–µ—Ä–∞—Ü–∏–∏**: –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –Ω—É–º–µ—Ä–∞—Ü–∏—è –ø—É–Ω–∫—Ç–æ–≤ (`p_num`) —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –¥–ª—è —Å—Å—ã–ª–æ–∫
4. **–ü–æ–ª–Ω–æ—Ç–∞ —Ç–µ–∫—Å—Ç–∞**: –í—Å–µ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã —Å–∫–ª–µ–µ–Ω—ã –≤ `full_text`

---

## ‚öôÔ∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–∏—Å–∫–∞

### 1. –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

#### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Sentence Transformers** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- **–ú–æ–¥–µ–ª—å**: `paraphrase-multilingual-MiniLM-L12-v2`
- **FAISS** ‚Äî –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —Å –∫–æ—Å–∏–Ω—É—Å–Ω—ã–º —Å—Ö–æ–¥—Å—Ç–≤–æ–º

#### –ü—Ä–æ—Ü–µ—Å—Å –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

```python
# 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏
model = SentenceTransformer('paraphrase-multilingual-MiniLM-L12-v2')

# 2. –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤ (–Ω–∞–∑–≤–∞–Ω–∏–µ + –æ–ø–∏—Å–∞–Ω–∏–µ)
section_texts = [f"{section['name']}. {section['description']}"
                 for section in sections]
section_embeddings = model.encode(section_texts)
faiss.normalize_L2(section_embeddings)  # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –∫–æ—Å–∏–Ω—É—Å–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞

# 3. –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—É–Ω–∫—Ç–æ–≤ –∏ –ø–æ–¥–ø—É–Ω–∫—Ç–æ–≤
content_texts = [item['full_text'] for item in all_content]
content_embeddings = model.encode(content_texts)
faiss.normalize_L2(content_embeddings)
```

### 2. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ FAISS

#### –î–≤–∞ —É—Ä–æ–≤–Ω—è –∏–Ω–¥–µ–∫—Å–æ–≤

1. **–ò–Ω–¥–µ–∫—Å —Ä–∞–∑–¥–µ–ª–æ–≤** (`section_index`)
   - 24 –≤–µ–∫—Ç–æ—Ä–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ + –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤

2. **–ò–Ω–¥–µ–∫—Å –ø—É–Ω–∫—Ç–æ–≤** (`content_index`)
   - 222 –≤–µ–∫—Ç–æ—Ä–∞ (–≤—Å–µ –ø—É–Ω–∫—Ç—ã –∏ –ø–æ–¥–ø—É–Ω–∫—Ç—ã)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–∑–¥–µ–ª–æ–≤

```python
# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ FAISS –∏–Ω–¥–µ–∫—Å–æ–≤
section_index = faiss.IndexFlatIP(embedding_dim)
section_index.add(section_embeddings)

content_index = faiss.IndexFlatIP(embedding_dim)
content_index.add(content_embeddings)
```

### 3. –¢—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤—ã–π –ø–æ–∏—Å–∫

#### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞

```
–ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚Üì
[–£—Ä–æ–≤–µ–Ω—å 1] –ü–æ–∏—Å–∫ –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º (–Ω–∞–∑–≤–∞–Ω–∏–µ + –æ–ø–∏—Å–∞–Ω–∏–µ)
    ‚Üì top_k_sections = 3
[–£—Ä–æ–≤–µ–Ω—å 2] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—É–Ω–∫—Ç–æ–≤ –ø–æ –Ω–∞–π–¥–µ–Ω–Ω—ã–º —Ä–∞–∑–¥–µ–ª–∞–º
    ‚Üì
[–£—Ä–æ–≤–µ–Ω—å 3] –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É–Ω–∫—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–∑–¥–µ–ª–æ–≤
    ‚Üì top_k_content = 5-10
–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–¥–∞—á–∞ —Å –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–∫–æ—Ä–∏–Ω–≥–æ–º
```

#### –ú–µ—Ç—Ä–∏–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è:

1. **section_score** ‚Äî —Å—Ö–æ–¥—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–∞ —Å —Ä–∞–∑–¥–µ–ª–æ–º
2. **content_score** ‚Äî —Å—Ö–æ–¥—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–∞ —Å –ø—É–Ω–∫—Ç–æ–º
3. **combined_score** ‚Äî –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞:
   ```python
   section_score_norm = (section_score + 1) / 2  # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫ [0, 1]
   content_score_norm = (content_score + 1) / 2
   combined_score = section_score_norm * content_score_norm
   ```

#### –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–∏—Å–∫–∞

**–ó–∞–ø—Ä–æ—Å**: "–≥–¥–µ —Ä–∞–∑—Ä–µ—à–µ–Ω –æ–±–≥–æ–Ω"

```
üìÅ –†–ê–ó–î–ï–õ 1: 10. –û–±–≥–æ–Ω, –æ–ø–µ—Ä–µ–∂–µ–Ω–∏–µ, –≤—Å—Ç—Ä–µ—á–Ω—ã–π —Ä–∞–∑—ä–µ–∑–¥
   üìù –û–ø–∏—Å–∞–Ω–∏–µ: –†–∞–∑–¥–µ–ª —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±–≥–æ–Ω–∞ –∏ –æ–ø–µ—Ä–µ–∂–µ–Ω–∏—è...
   üéØ –°—Ö–æ–¥—Å—Ç–≤–æ —Ä–∞–∑–¥–µ–ª–∞: 0.484

   10.4
   –û–±–≥–æ–Ω –∑–∞–ø—Ä–µ—â–µ–Ω: –Ω–∞ —Ä–µ–≥—É–ª–∏—Ä—É–µ–º—ã—Ö –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∞—Ö...
   üéØ –°—Ö–æ–¥—Å—Ç–≤–æ: —Ä–∞–∑–¥–µ–ª=0.484, –ø—É–Ω–∫—Ç=0.348
   üìà –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π score: 0.500
```

### 4. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏–Ω–¥–µ–∫—Å—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `faiss_cache/`:

```
faiss_cache/
‚îú‚îÄ‚îÄ sections_index.faiss    # FAISS –∏–Ω–¥–µ–∫—Å —Ä–∞–∑–¥–µ–ª–æ–≤
‚îú‚îÄ‚îÄ content_index.faiss     # FAISS –∏–Ω–¥–µ–∫—Å –ø—É–Ω–∫—Ç–æ–≤
‚îî‚îÄ‚îÄ metadata.pkl            # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (—Ç–µ–∫—Å—Ç—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞

```python
# –ò–∑ Jupyter Notebook
from RAG_for_law import interactive_three_level_search

interactive_three_level_search()
```

### –ö–æ–º–∞–Ω–¥—ã –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞

- `<–≤–∞—à –≤–æ–ø—Ä–æ—Å>` ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ –ü–î–î
- `—Ä–∞–∑–¥–µ–ª X` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–∞–∑–¥–µ–ª–∞ X
- `–∏—Å—Ç–æ—Ä–∏—è` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤
- `—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–∏—Å–∫–∞
- `–≤—ã—Ö–æ–¥` ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```
üîç –í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –ø–æ –ü–î–î: –º–æ–∂–Ω–æ –ª–∏ –æ–±–≥–æ–Ω—è—Ç—å –Ω–∞ –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–µ

‚úÖ –ù–∞–π–¥–µ–Ω–æ 5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞ 0.03 —Å–µ–∫

üìÅ –†–ê–ó–î–ï–õ 1: 10. –û–±–≥–æ–Ω, –æ–ø–µ—Ä–µ–∂–µ–Ω–∏–µ, –≤—Å—Ç—Ä–µ—á–Ω—ã–π —Ä–∞–∑—ä–µ–∑–¥
   10.4 –û–±–≥–æ–Ω –∑–∞–ø—Ä–µ—â–µ–Ω: –Ω–∞ —Ä–µ–≥—É–ª–∏—Ä—É–µ–º—ã—Ö –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∞—Ö...
   üéØ –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π score: 0.512
```

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
pip install python-docx
pip install faiss-cpu
pip install sentence-transformers
pip install numpy
pip install scikit-learn
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
RAG_for_law/
‚îú‚îÄ‚îÄ README.md                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ RAG_for_law.ipynb            # Jupyter notebook —Å –∫–æ–¥–æ–º
‚îú‚îÄ‚îÄ pdd_text.docx                # –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –ü–î–î
‚îú‚îÄ‚îÄ pdd.json                     # –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ü–î–î
‚îî‚îÄ‚îÄ faiss_cache/                 # –ö—ç—à –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    ‚îú‚îÄ‚îÄ sections_index.faiss
    ‚îú‚îÄ‚îÄ content_index.faiss
    ‚îî‚îÄ‚îÄ metadata.pkl
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞** | ~0.03 —Å–µ–∫ |
| **–¢–æ—á–Ω–æ—Å—Ç—å (top-3)** | –í—ã—Å–æ–∫–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å |
| **–†–∞–∑–º–µ—Ä –∏–Ω–¥–µ–∫—Å–æ–≤** | ~2 MB |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–∞** | –†—É—Å—Å–∫–∏–π |

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞

1. **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫**: –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ FAISS –Ω–∞ –ø–æ—Ä—è–¥–∫–∏ –±—ã—Å—Ç—Ä–µ–µ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ
2. **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å**: –ù–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø—É–Ω–∫—Ç—ã –¥–∞–∂–µ –ø—Ä–∏ —Ä–∞–∑–ª–∏—á–Ω–æ–π —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–µ
3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–∏–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
5. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –°—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—É–Ω–∫—Ç—ã –ü–î–î –≤ –∫–∞–∂–¥–æ–º –æ—Ç–≤–µ—Ç–µ

---

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

---

## üë• –ê–≤—Ç–æ—Ä—ã

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–î–∞–Ω–Ω—ã–µ –ü–î–î –†–§ —è–≤–ª—è—é—Ç—Å—è –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏. –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö.
